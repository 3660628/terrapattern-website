-###################################################
-#   Page-specific CSS
-###################################################

- content_for :css do
  %link{rel:"stylesheet", href:"/css/interface.css"}

-###################################################
-#   Page-specific Javascript
-###################################################

- content_for :javascript do
  :javascript
    var MAPS_API_KEY = "#{ENV["GMAPS_KEY"]}";
    var BOUNDING_BOX = #{@city_data["bounding_box"].to_json};
    var MAP_CENTER   = #{@city_data["center"].to_json};
    var BOUNDARY     = #{@geojson};


  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.0/p5.min.js" charset="utf-8"></script>


  %script{src: "/js/uri.js"}
  %script{src: "/js/app.js"}

  
  %script{src: "https://maps.googleapis.com/maps/api/js?key=#{ENV["GMAPS_KEY"]}&callback=terrapatternMap.initialize&libraries=places", async: "async", defer: "defer"}

-###################################################
-#   Page template
-###################################################

%section.global-page-header
  .container
    .row
      .col-md-12
        .block
          %h2= @city_data["name"]
          .col-md-8.header-description
            %p.prose Click on a place in the map to find similar places

%section#service-page.pages.service-page
  .container
    .row#map_interface
      .col-md-7
        .block
          .row
            .col-md-12
              %input#search_box.controls.wow.fadeInUp.animated{"data-wow-delay" => ".3s", "data-wow-duration" => "500ms", type:"text", placeholder: "Search for a location in #{@city_data["name"]}"}
              #main-map.wow.fadeInUp.animated{"data-wow-delay" => ".3s", "data-wow-duration" => "500ms"}
                #map
      .col-md-5
        .block
          .row
            .col-md-6
              %h2.wow.fadeInUp.animated{"data-wow-delay" => ".3s", "data-wow-duration" => "500ms"}Minmap
            .col-md-6
              %h2.wow.fadeInUp.animated{"data-wow-delay" => ".3s", "data-wow-duration" => "500ms"}TSNE Grid
          .row
            .col-md-12
              #mini_displays
          .row
            .col-md-12
              %h2.wow.fadeInUp.animated{"data-wow-delay" => ".3s", "data-wow-duration" => "500ms"}Results
          .row
            .col-md-12  
              #results_grid
              #results_pagination

%section#call-to-action
  .container
    .row
      .col-md-12
        .block
          %h2.title.wow.fadeInDown.export{"data-wow-delay" => ".3s", "data-wow-duration" => "500ms"} Export your geojson
          %a.btn.btn-default.btn-contact.wow.fadeInDown{"data-wow-delay" => ".7s", "data-wow-duration" => "500ms", :href => "contact.html"} Export